<?php include("registration_class.php");class registration_manager{	function validation($addmemberclass)	{		global $db;		$error=array();		$postvar = $addmemberclass->getPostVar();		     $address  		= trim($_POST['address']);			 $city_name		= trim($_POST['city_name']);			 $state         = trim($_POST['State']);			 $zip           = trim($_POST['zip']);		     $email         = trim($_POST['email']);			 $password      = trim($_POST['password']); 			 $cpassword     = trim($_POST['cpassword']);		     $fname         = trim($_POST['fname']);			 $lname         = trim($_POST['lname']);  			 $display_name  = trim($_POST['display_name']);			 $gender        = $_POST['gender'];			 $months        = $_POST['months'];			 $days          = $_POST['days'];			 $year          = $_POST['year']; 			 $country       = $_POST['country']; 			 $province      = trim($_POST['province']); 			 $phone_no      = $_POST['phone_no'];   	         $ethancity     = $_POST['ethancity'];			 $isexp         = $_POST['isexp'];		     $studio1       = $_POST['studio1'];  			 $studio2       = $_POST['studio2'];   			 $studio3       = $_POST['studio3'];			 $show_date1    = $_POST['show_date1'];			 $show_date2    = $_POST['show_date2'];			 $show_date3    = $_POST['show_date3'];			 			 $security_que1 = $_POST['security_que1'];  			 $answer1       = $_POST['answer1'];   			 $security_que2 = $_POST['security_que2'];			 $answer2       = $_POST['answer2'];			 $security_que3 = $_POST['security_que3'];			 $answer3       = $_POST['answer3'];		  		 		 	 $error= array();		 		    if($address=="")		       {				$error[0]="Please Enter Address.";			   }			   if($city_name=="")		       {				$error[1]="Please Enter City.";			   }			   			     if($state=="")		       {				$error[2]="Please Enter State.";			   }			      if($zip=="")		       {				$error[3]="Please Enter ZIP.";			   }			    if($email=="")				{					 $error[4]="Please enter  email address";				}				 if($email!="")				  {				  	 if(!filter_var($email, FILTER_VALIDATE_EMAIL))	             {			           $error[4]="Please enter a valid email address";	             }					 else{    					 $grt= "SELECT `email` as tot FROM `users` WHERE `email`='$email'";			          $resw =$db->select_data($grt);										  $ret=  count($resw) ;					  if($ret >0)					  {					  	 $error[4]="Please email address Alerady taken";					  }					  					  					 }				  }			     if($password=="")				{					 $error[5]="Please enter Password";				}			 	 if($password!="")				 {				    $m=	strlen($password);			 	    if	($m < 6 )					{						$error[5]="Password Must be 6 character ";					}					$uppercase = preg_match('@[A-Z]@', $password);					$lowercase = preg_match('@[a-z]@', $password);					$number    = preg_match('@[0-9]@', $password);			 	if(!$uppercase || !$lowercase || !$number)					{											$error[5]="Password should contain at least one upper case letter,one lower case letter and one number";					}					 }							 if($cpassword!=$password)				{									$error[6]="Please enter same password again";				}							if($fname=="")				{										$error[7]="Please enter your first name";				}							if($lname=="")				{										$error[8]="Please enter your Last name";				}							if($display_name=="")				{										$error[9]="Please enter your Display name";				}			 				 if($gender=="")				{										$error[10]="Please select your gender";				}			if($months=="" || $days=="" || $year=="")			{								$error[11]="Please select your date of birth";			}			if($country=="")			{				$error[12]="Please select your Country";			}			      			  if($phone_no=="")			{				$error[15]="Please Enter Phone number";			}		    if($ethancity=="")			{				$error[16]="Please Enter Ethancity number";			}			if ($isexp=="expyes")			{				if ($studio1=="" && $studio2=="" && $studio3=="" && $show_date1=="" && $show_date2=="" && $show_date3=="")				{					$error[17]="Please Enter Webcam Experience or Select No";				}				else				{					if( !(($studio1!="" && $show_date1!="") 						  || ($studio2!="" && $show_date2!="") 						  || ($studio3!="" && $show_date3!=""))					  )//if					{						$error[17]="Please Enter Webcam Experience with studio name and show date";					}				}				}			if($security_que1=="")			{				$error[18]="Please Select Question First";			}            else			if($security_que1==$security_que2 || $security_que1==$security_que3)				{				$error[18]="Please Select Other Question";			}						if($answer1=="")			{				$error[19]="Please enter question answer first";			}			if($security_que2=="")			{				$error[20]="Please Select Question Second";			}            else			if($security_que2==$security_que1 || $security_que2==$security_que3)				{				$error[20]="Please Select Other Question";			}						if($answer2=="")			{				$error[21]="Please enter question answer second";			}		    if($security_que3=="")			{				$error[22]="Please Select Question Third";			}            else			if($security_que3==$security_que1 || $security_que3==$security_que2)				{				$error[22]="Please Select Other Question";			}									if($answer3=="")			{				$error[23]="Please enter question answer Third";			}			// if($province=="")			// {				// $error[24]="Please enter Province";			// }// 					return $error;	}//function validate		function register($addmemberclass)	{		global $db;		$postvar = $addmemberclass->getPostVar();	         $address  		= trim($_POST['address']);			 $address2  	= trim($_POST['address2']);			 $city_name		= trim($_POST['city_name']);			 $state         = trim($_POST['State']);			 $zip           = trim($_POST['zip']);		     $email         = trim($_POST['email']);			 $password      = trim($_POST['password']); 			 $cpassword     = trim($_POST['cpassword']);		     $fname         = trim($_POST['fname']);			 $lname         = trim($_POST['lname']);			 $province      = trim($_POST['province']);  			 $display_name  = trim($_POST['display_name']);			 $gender        = $_POST['gender'];			  $months       = $_POST['months'];	  		   $days        = $_POST['days'];	 		  $year         = $_POST['year']; 			  $country      = $_POST['country']; 			  $phone_no     = $_POST['phone_no']; 			   $ethancity   = $_POST['ethancity']; 			   $isexp       = $_POST['isexp'];			   $studio1     = $_POST['studio1'];  			   $studio2     = $_POST['studio2'];   			   $studio3     = $_POST['studio3'];			   $show_date1  = $_POST['show_date1'];			   $show_date2  = $_POST['show_date2'];			   $show_date3  = $_POST['show_date3'];			   $question1   = $_POST['security_que1'];			   $question2   = $_POST['security_que2'];			   $question3   = $_POST['security_que3'];			   $answer1     = $_POST['answer1'];				   $answer2     = $_POST['answer2'];   			   $answer3     = $_POST['answer3'];			   $afftrackid  = $_POST['hd1'];//affiliate ID			   $groupid     = $_POST['group_no'];//			   $affiliate_idn=@explode(":",$afftrackid,-1);	//		 echo  $affiliate_id=$affiliate_idn[0];		//	 echo  $groupid=$affiliate_idn[1];			   			  // $groupid=$_POST['groupid'];			   $studio 		= $studio1;			   if ($studio2!="")			      $studio.="*#*".$studio2;			   if ($studio3!="")   			      $studio.="*#*".$studio3;			   			   $show_date   = $show_date1;			   if ($show_date2!="")			      $show_date.="*#*".$show_date2;			   if ($show_date3!="")   			      $show_date.="*#*".$show_date3;			    		   			   if ($isexp=="")			       $isexp="N";	     $dob = $year.'-'.$months.'-'.$days;	  	 $sql="INSERT INTO `users`(`fname`, `lname`, `gender`, `dateofbirth`, `country`,  `email`, `phone`, 	  	 	   `password`,`ethancity`,`approve`,`studio_name`,`show_date`,`question1`, `answer1`, `question2`,	  	 	    `answer2`, `question3`, `answer3`,`affiliate_id`,`group_id`) VALUES('$fname','$lname','$gender','$dob','$country',	  	 	    '$email','$phone_no','$password','$ethancity','0','$studio','$show_date','$question1',	  	 	    '$answer1','$question2','$answer2','$question3','$answer3','$afftrackid','$groupid')";							//echo $sql;		 	$result=$db->insert_data($sql);			//die;	       $in_id=mysql_insert_id();		//die;			//$_SESSION['user_id']=$in_id;                 							   if(count($result)>0)			{							    $to=$email  ;            			                    //$subject =$sub;			                    $subject ="WebcamsUniversity Registration";							    $headers  = "MIME-Version: 1.0\r\n"; 							    $headers .= "Content-type: text/html; charset=iso-8859-1\r\n";								 $from  =  ADMINMAIL;								//$from   = "manish@mindsgroup.org";							  	$admin_name = "WebcamsUniversity  Admin";								$headers .= "From:" . $admin_name . '<' . $from . '>';							    //$headers .= "From: Web Camp University Admin <".ADMINMAIL.">";							  	$mailmatter ='								<table align="left" border="0" cellpadding="0" cellspacing="0">								<tr><td><b>Dear Sir/Mam,Your Login Details As follows </b></td></tr>								<tr><td> Email :-  '.stripslashes($email).'</td></tr>								<tr><td> Password :-  '.stripslashes($password).'</td></tr>								<tr><td>&nbsp;</td></tr>								<tr><td><b>Regards,</td></tr>								<tr><td>Web Cam University.</td></tr>								</td></tr>								</table>';														$message=$mailmatter;									@mail($to,$subject,$message,$headers); 									 				}			$sql2="INSERT INTO `address`(`uid`,`street`,`street_sec`,`city`,`state`,`province` ,`zip`,`display_name`) VALUES('$in_id','$address','$address2','$city_name','$state','$province','$zip','$display_name')";			//echo $sql;			$result2=$db->insert_data($sql2);			if(count($result)>0)			{				$msg ="Registered Successfully.";				return $msg;			}	}// reg}//class?>